@{layout('')}
@{title(config.name)}

<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=11" />
	<meta name="format-detection" content="telephone=no" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta name="robots" content="all,follow" />
	@{import('meta', 'head','default.js','style.css','sidebar.css','chat.css','spa.min@18.js','spa.min@18.css','ui.css','ui.js')}
	<script src="/js/livereload.js" data-url="ws://127.0.0.1:35729" ></script>
	<script src="https://js.pusher.com/7.0/pusher.min.js"></script>
	<script>

		// Enable pusher logging - don't include this in production
		Pusher.logToConsole = true;
	
		var pusher = new Pusher('d8dd33fb0ca5daf6d733', {
		  cluster: 'eu'
		});
	
	
	  </script>
</head>
<body>
	<div data---="websocket__message__url:/;encoder:false"></div>
	<div data---="loading" class="hidden"></div>
	<div data---="notify"></div>
	<div data---="sounds__common.volume"></div>

<div class="app">
	<div class="app_body">
		<div class="sidebar">
			<div class="sidebar_header">
				<div class="sidebar_headerLeft">
					<img src="/img/bugatti.jpg" alt="">
				</div>
				<div class="sidebar_headerRight">
				 <i class="fa fa-circle-notch" ></i>
				 <i class="fa fa-comment-dots" ></i>
				 <i class="fa fa-ellipsis-v" ></i>
				</div>
			</div>


			<div class="sidebar_search">
				<div class="sidebar_searchContainer">
					<i class="fa fa-search" ></i>
					<input placeholder="Search or Start new Chat" type="text">
				</div>
			</div>
			<div data---="chat__common.chats" ></div>

		</div>
		<div class="chat">
			<div class="chat_header">
				<div class="chat_headerAvatar">
					<img src="/img/agape.jpg" alt="">
				</div>
				<div class="chat_headerInfo">
					<h3>Agape Raston</h3>
					<p>A good girl from Green City</p>
				</div>
				<div class="chat_headerRight">
					<i class="fa fa-search"></i>
					<i class="fa fa-paperclip"></i>
					<i class="fa fa-ellipsis-v"></i>
				</div>
			</div>
			<div data---="chatbody__common.messages" class="chat_body"></div>
			
			<div class="chat_footer">
				<i class="fa fa-smile"></i>
				<i class="fa fa-paperclip"></i>
				
				<form action="/api/v1/messages/new" method="POST">

					<input type="hidden" name="name"value="Louis Bertson">
					<input type="hidden" name="receiver" value="0">
					<input type="text" name="message" placeholder="Type message here">
					<button onclick="sendMessage()" type="submit" >Send Message</button>
				</form>
				<i class="fa fa-microphone"></i>
			</div>
		</div>
	</div>	
</div>

<script defer>
	SETTER('loading','show');
	var common = {};
		common.messages = [];
		common.chats = [];
		common.volume = 80;
		function sendMessage(){
			this.preventDefault();

		}
		common.messages.push({ "id": 1 , "author": "Agape Raston", "body":"Hi Louis","timestamp":"24 Nov 2021","incoming" : false});
		common.messages.push({ "id": 2 , "author": "Agape Raston", "body":"How are you?","timestamp":"24 Nov 2021","incoming" : false});
		common.messages.push({ "id": 3 , "author": "Louis Bertson", "body":"I am Good, how about you?","timestamp":"24 Nov 2021","incoming" : true});
		common.messages.push({ "id": 4 , "author": "Agape Raston", "body":"I'm good my friend","timestamp":"24 Nov 2021","incoming" : false});
		common.messages.push({ "id": 5 , "author": "Louis Bertson", "body":"Okey fine. tell me","timestamp":"24 Nov 2021","incoming" : true});
		common.messages.push({ "id": 6 , "author": "Agape Raston", "body":"i miss you. where are you?","timestamp":"24 Nov 2021","incoming" : false});
		common.messages.push({ "id": 7 , "author": "Louis Bertson", "body":'Ohh i miss you too.',"timestamp":"24 Nov 2021","incoming" : true});
		common.messages.push({ "id": 8 , "author": "Louis Bertson", "body":"I'm at home, i will come don't worry","timestamp":"24 Nov 2021","incoming" : true});
		common.messages.push({ "id": 9 , "author": "Agape Raston", "body":"Okay my friend","timestamp":"24 Nov 2021","incoming" : false});
		common.messages.push({ "id": 10 , "author": "Louis Bertson", "body":"okay fine","timestamp":"24 Nov 2021","incoming" : true});
		common.messages.push({ "id": 11 , "author": "Louis Bertson", "body":"have a nice day","timestamp":"24 Nov 2021","incoming" : true});
		common.messages.push({ "id": 12 , "author": "Agape Raston", "body":"thanks alot, same to you","timestamp":"24 Nov 2021","incoming" : false});
		common.messages.push({ "id": 13 , "author": "Louis Bertson", "body":"thanks","timestamp":"24 Nov 2021","incoming" : true});

		common.chats.push({ 'id': 1 , 'img': '/img/agape.jpg', 'message': 'I have understand you...', 'name': "Agape Raston"});
		common.chats.push({ 'id': 2 , 'img': '/img/chris.jpg', 'message': 'Where is your Bugatti????', 'name': "Kinda Christian"});
		common.chats.push({ 'id': 3 , 'img': '/img/maman.jpg', 'message': 'Du courage...', 'name': "Dear Maman"});
		common.chats.push({ 'id': 6 , 'img': '/img/peter.jpg', 'message': 'It depends on you', 'name': "Peter Sirka"});
		common.chats.push({ 'id': 8 , 'img': '/img/elon.jpg', 'message': 'That 6 months can change your life...', 'name': "Elon Musk"});
		common.chats.push({ 'id': 7 , 'img': '/img/sonny.jpg', 'message': 'Reveille le lion qui dors en toi...', 'name': "Sonny Court"});
		common.chats.push({ 'id': 4 , 'img': '/img/edith.jpg', 'message': 'Ce n\'est pas un probleme', 'name': "Edith"});
		common.chats.push({ 'id': 5 , 'img': '/img/bro.jpg', 'message': 'Tu es au bureau?', 'name': "Blood brother"});
		function initUsers(){
			SETTER('loading','hide',1000);
		}	
		var channel = pusher.subscribe('my-channel');
		channel.bind('my-event', function(data) {
		console.log(data);
		SETTER('sounds','play','success');
		SETTER('notify/success',data.message);
		});
   initUsers();
	</script>
</body>
</html>