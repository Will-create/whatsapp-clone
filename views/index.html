@{layout('')}

<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=11" />
	<meta name="format-detection" content="telephone=no" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<meta name="robots" content="all,follow" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="#FFF" />
	<meta name="apple-mobile-web-app-title" content="@{config.name}" />
	<link rel="apple-touch-icon" href="/img/icon.png" />
	@{import('head', 'meta', 'spa.min@18.js', 'spa.min@18.css','default_ui.js', 'default_ui.css', 'manifest')}
</head>
<body>
	<div data---="serviceworker__common.version__datasource:common.serviceversion"></div>
	<div class="container">
		<div class="dropdown_menu">
			<div class="dropdown_item">New Group</div>
			<div class="dropdown_item">New broadcast</div>
			<div class="dropdown_item">Whatsapp Web</div>
			<div class="dropdown_item">Starred Messages</div>
			<div class="dropdown_item">Settings</div>
		</div>

		<div class="back_trigger"> <i class="fa fa-arrow-left" ></i> </div>
		<input type="text" class="search_bar">
		<div class="lightbox">
			<div class="lightbox_container">
				<div class="lightbox_name">Louis Bertson</div>

				<div class="lightbox_image">
					<img src="/img/profiles/bugatti.jpg" alt="Bugatti car">
				</div>
				<div class="lightbox_controls">
					<div class="one_control"><i class="fa fa-comment-dots" ></i></div>
					<div class="one_control"><i class="fa fa-phone" ></i></div>
					<div class="one_control"><i class="fa fa-video" ></i></div>
					<div class="one_control"><i class="fa fa-info" ></i></div>
				</div>
			</div>
		</div>
        <div class="title_bar">
            <div class="title_top">
                <div class="title_container">
                    <p>Whatsapp</p>
                </div>
				<div class="icon_container">
					<div>
						<i class="fa fa-search"></i>
						<i class="fa fa-ellipsis-v"></i>
					</div>
				</div>
            </div>
			<div class="toptab_menu">
				<div class="single_tab"><i class="fa fa-circle-notch"></i>Status</div>
				<div class="single_tab"><i class="fa fa-phone"></i>Calls</div>
			</div>
        </div>
		<div  class="messages_section dragscroll">
			<div class="single_chat">
				<div class="image_container">
					<img src="/img/profiles/agape.jpg">
					</div>
				<div class="content_container">
					<div class="content_container_inner">
						<p class="user_name"> <name>Agape Raston</name> <span> 08:56 AM</span> </p>
						<p class="chat_content">I have understand You <span>99</span> </p>
			   </div>
				</div>
			</div>
			<div class="single_chat">
				<div class="image_container">
					<img src="/img/profiles/chris.jpg">
				</div>
				<div class="content_container">
					<div class="content_container_inner">
						<p class="user_name"> <name>Chris</name> <span>11:56 AM</span> </p>
						<p class="chat_content">Where is your Bugatti?<span>87</span> </p>
			   </div>
				</div>
			</div>
			<div class="single_chat">
				<div class="image_container">
					<img src="/img/profiles/maman.jpg">
				</div>
				<div class="content_container">
					<div class="content_container_inner">
						<p class="user_name"> <name>Dear maman</name> <span>02:56 PM</span> </p>
						<p class="chat_content">Courage...<span>1</span> </p>
			   </div>
				</div>
			</div>
			<div class="single_chat">
				<div class="image_container">
					<img src="/img/profiles/peter.jpg">
				</div>
				<div class="content_container">
					<div class="content_container_inner">
						<p class="user_name"> <name>Peter Sirka</name> <span>01:56 AM</span> </p>
						<p class="chat_content">It depends on you<span>56</span> </p>
			   </div>
				</div>
			</div>
			<div class="single_chat">
				<div class="image_container">
					<img src="/img/profiles/elon.jpg">
				</div>
				<div class="content_container">
					<div class="content_container_inner">
						<p class="user_name"> <name>Elon Musk</name> <span>02:56 AM</span> </p>
						<p class="chat_content">These 6 months can change your life... <span>65</span> </p>
			   </div>
				</div>
			</div>
			<div class="single_chat">
				<div class="image_container">
					<img src="/img/profiles/sonny.jpg">
				</div>
				<div class="content_container">
					<div class="content_container_inner">
						<p class="user_name"> <name>Sonny Court</name> <span class="read">YESTERDAY</span> </p>
						<p class="chat_content">Reveille le Goggins qui dors en toi ...	</p>
			   </div>
				</div>
			</div>
			<div class="single_chat">
				<div class="image_container">
					<img src="/img/profiles/bro.jpg">
				</div>
				<div class="content_container">
					<div class="content_container_inner">
						<p class="user_name"> <name>Dear Brother</name> <span class="read">WEDNESDAY</span> </p>
						<p class="chat_content">C'est bien</p>
			   </div>
				</div>
			</div>
			<div class="single_chat">
				<div class="image_container">
					<img src="/img/profiles/edith.jpg">
				</div>
				<div class="content_container">
					<div class="content_container_inner">
						<p class="user_name"> <name>Edith</name> <span class="read">SATURDAY</span> </p>
						<p class="chat_content">cc, comment tu vas? </p>
			   </div>
				</div>
			</div>
		</div>
		<div  class="android_controls">
			<div class="botomtab_menu">
				<div class="single_tab "><i class="fa fa-camera"></i>Camera</div>
				<div class="single_tab "><i class="fa fa-comment-dots"></i>Chats</div>
				<div class="single_tab"><i class="fa fa-users"></i>Groups</div>
				<div class="single_tab"><i class="fa fa-circle-notch"></i>Status</div>
				<div class="single_tab"><i class="fa fa-phone"></i>Calls</div>
			</div>
		</div>
	</div>
	<script>
	
	$('document').ready(function(){
		(function(){
			var previousScroll = 0;
	
			$('.messages_section').scroll(function(){
				var currentScroll = $('.messages_section').scrollTop();
				if(currentScroll > previousScroll){
					if(currentScroll > 0 && currentScroll <= 90){
						$('.title_bar').css('margin-top', '-'+currentScroll+'px');
					}else{
						$('.title_bar').css('margin-top', '-75px');
					}
				}else{
					if( currentScroll <= 90){
						$('.title_bar').css('margin-top', '-'+currentScroll+'px');
					}else{
						$('.title_bar').css('margin-top', '-75px');
					}
				}
	
				previousScroll = currentScroll;
			});
	
		})();


		$('.icon_container div i:nth-child(2)').click(function(){	
			
			$('.dropdown_menu').animate({width : '300px', height : 'auto',opacity :1 },200);
		});

		//
		// CODE TO BRING OUT UP THE IMAGE LIGHTBOX
		//
		$('.image_container').click(function(){
			var image = $(this).children('img').attr('src');
			var name = $(this).parent().find('.user_name name').text(); 
			$('.lightbox_name').text(name);
			$('.lightbox_image img').attr('src',image);
			$('.lightbox').css('display','flex');
			$('.lightbox').animate({opacity : 1},200);
			$('.lightbox_container').show();
		});
		//hide lightbox
		$('.lightbox').click(function(e){
			console.log('clicked');
			var q = $(this);
			if($(e.target).attr('class') == 'lightbox'){
				 q.animate({opacity : 0},200);
				 $('.lightbox_container').hide('slow');
				 $('.lightbox_image img').attr('src','');

				 setTimeout(function(){
					q.css('display','none');
				 },200);
			}
		});
		// On the change of the search bar input


		// Code to make search bar work
	
	   
		$('.icon_container div i:nth-child(1)').click(function(){	
			$('.search_bar').css('display','block');
			$('.back_trigger').css('display','block');
			$('.search_bar').animate({opacity : 1 , width : '100%'},200);
			$('.title_bar').animate({marginTop : '-75px'},200);
			$('.search_bar').focus();
		});
		
		$('body').on('change, keyup','.search_bar',function(){
			var thisValue = $(this).val().toLowerCase();
			var thisLength = $(this).val().length;
			$('.single_chat').each(	function () {
				var thisChat = $(this);
				var username  = $(this).find('.user_name name').text().toLowerCase();
				if(username.indexOf(thisValue) < 0){
					thisChat.hide();
				}else{
					thisChat.show();
				}
			  });
		 });
		 $('.back_trigger').click(function(){
			$('.search_bar').val('');
			$('.search_bar').keyup();
			$('.search_bar').animate({opacity : 0},200);
			$('.title_bar').animate({marginTop : '0px'},200);
			$('.back_trigger').css('display','none');
			setTimeout(function(){
				$('.search_bar').css('display','none');
			},600);
		});
		$('*').click(function(e){
			if($(e.target).width() > 100){
				if($(e.target).attr('class') != 'dropdown_menu' || $(e.target).attr('class') !== 'dropdown_item'){
			
					$('.dropdown_menu').animate({width : '0px', height : 'auto',opacity :0 },200);
	
				}
			}
			
		})

	});
	</script>
</body>
</html>

