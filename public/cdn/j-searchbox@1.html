<style>.ui-searchbox{border-radius:100px;border:1px solid #E0E0E0;padding:5px 10px;font-size:14px}.ui-searchbox-input>div{margin-right:20px}.ui-searchbox-input>div input{width:100%;border:0;padding:0;margin:0;outline:0;background-color:transparent;color:#000}.ui-searchbox-type{float:left;cursor:default}.ui-searchbox-control{float:right;width:20px;color:gray;text-align:right;cursor:pointer}.ui-searchbox-placeholder{color:gray}.ui-searchbox-placeholder i{margin-right:5px}.ui-dark .ui-searchbox{border-color:#404040;background-color:#252525}.ui-dark .ui-searchbox-input>div input{color:#FFF}.ui-dark .ui-searchbox-control{color:#A0A0A0}.ui-large .ui-searchbox{font-size:16px}.ui-large .ui-searchbox-control{margin-top:1px}</style>
<script>COMPONENT('searchbox@1','cleartype:0;keypress:0;autotrim:1',function(self,config){var cls='ui-'+self.name,cls2='.'+cls,els={},isvisible=false,type={},skip=false,initialized=false,hidetimeout;self.readonly();self.nocompile&&self.nocompile();self.make=function(){self.aclass(cls);self.append('<div class="{0}-placeholder"><i class="fa fa-search"></i><span>{1}</span></div><div class="{0}-input hidden"><span class="{0}-control"><i class="fa fa-times-circle"></i></span><span class="{0}-type"></span><div><input type="text" maxlength="100" /></div></div>'.format(cls,config.placeholder));els.type=self.find(cls2+'-type');els.placeholder=self.find(cls2+'-placeholder');els.input=self.find(cls2+'-input');els.searchinput=els.input.find('input');els.placeholder.on('click',function(){isvisible=true;self.refresh();forcefocus();if(!initialized){config.init&&EXEC(self.makepath(config.init),self);initialized=true}});els.searchinput.on('blur focusout',function(){hidetimeout&&clearTimeout(hidetimeout);hidetimeout=setTimeout(function(){hidetimeout=null;isvisible=false;self.refresh()},100)});els.searchinput.on('focusin',function(){self.focus()});els.searchinput.on('input',function(){if(config.keypress)self.modifiedvalue('input')});els.searchinput.on('keydown',function(e){if(e.which===27)self.blur(true);else if(e.which===13&&!config.keypress)self.modifiedvalue('input',true)});self.find(cls2+'-control').on('click',function(){self.blur(true)});els.type.on('click',function(){hidetimeout&&clearTimeout(hidetimeout);isvisible=true;config.clicktype&&EXEC(self.makepath(config.clicktype),self,type,els.searchinput.val())})};self.blur=function(clear){isvisible=false;if(clear){els.searchinput.val('');if(config.cleartype)self.type('',null,false);self.modifiedvalue('input',true)}self.refresh()};self.show=function(){els.placeholder.trigger('click')};self.enter=function(){self.modifiedvalue('input',true)};self.focus=function(){config.autocomplete&&EXEC(self.makepath(config.autocomplete),self,els.searchinput)};var forcefocus=function(){els.searchinput.focus()};self.configure=function(key,value,init){if(init)return;switch(key){case'placeholder':els.placeholder.find('span').html(value||'');break}};self.modifiedvalue=function(caller,isenter){var val=els.searchinput.val();var model=self.get();var is=true;if(config.autotrim)val=val.trim();if(!model){is=false;model={}}if(!model.value)model.value='';if(!model.type)model.type='';var ischange=model.type!==type.value||model.value!==val;if(!ischange)return;model.type=type.value;model.value=val;if(isenter&&config.exec)SEEX(self.makepath(config.exec),model,self,caller);skip=true;if(is)self.update();else self.set(model)};self.resize=function(){var is=els.input.hclass('hidden');if(is)return;var div=els.searchinput.parent();var w=els.type.width();div.css('margin-left',w+5)};self.refresh=function(){var value=els.searchinput.val();var is=!!value||isvisible;els.placeholder.tclass('hidden',is);els.input.tclass('hidden',!is);self.resize()};self.type=function(html,value,noemit){if(type.html===html&&type.value===value)return;type.html=html;type.value=value;els.type.html(html);if(!noemit)self.modifiedvalue('type',true);self.resize()};self.setter=function(value){if(skip){skip=false;return}value&&els.searchinput.val(value.value);self.refresh()}});</script>