<style>.ui-imageviewer{position:fixed;left:0;top:0;bottom:0;right:0;z-index:1000;background-color:rgba(240,240,240,0.9)}.ui-imageviewer img{box-shadow:0 0 10px rgba(0,0,0,0.05)}.ui-imageviewer-loading{position:absolute;left:0;top:45px;right:0;bottom:0;background-color:rgba(255,255,255,0.9);z-index:2}.ui-imageviewer-loading>div{background:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzgiIGhlaWdodD0iMzgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IHgxPSI4LjA0MiUiIHkxPSIwJSIgeDI9IjY1LjY4MiUiIHkyPSIyMy44NjUlIiBpZD0iYSI+PHN0b3Agc3RvcC1jb2xvcj0iI0EwQTBBMCIgc3RvcC1vcGFjaXR5PSIwIiBvZmZzZXQ9IjAlIi8+PHN0b3Agc3RvcC1jb2xvcj0iI0EwQTBBMCIgc3RvcC1vcGFjaXR5PSIuNjMxIiBvZmZzZXQ9IjYzLjE0NiUiLz48c3RvcCBzdG9wLWNvbG9yPSIjQTBBMEEwIiBvZmZzZXQ9IjEwMCUiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxIDEpIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0zNiAxOGMwLTkuOTQtOC4wNi0xOC0xOC0xOCIgc3Ryb2tlPSJ1cmwoI2EpIiBzdHJva2Utd2lkdGg9IjIiPjxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0icm90YXRlIiBmcm9tPSIwIDE4IDE4IiB0bz0iMzYwIDE4IDE4IiBkdXI9IjAuOXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+PC9wYXRoPjxjaXJjbGUgZmlsbD0iI0EwQTBBMCIgY3g9IjM2IiBjeT0iMTgiIHI9IjEiPjxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0icm90YXRlIiBmcm9tPSIwIDE4IDE4IiB0bz0iMzYwIDE4IDE4IiBkdXI9IjAuOXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+PC9jaXJjbGU+PC9nPjwvc3ZnPg==) no-repeat 50% 50%;background-size:80px 80px;width:80px;height:80px;position:absolute;left:50%;top:50%;margin:-40px 0 0 -40px}.ui-imageviewer-header{height:45px;border-bottom:1px solid #E0E0E0;background-color:#FFF}.ui-imageviewer-header>div{line-height:16px;float:left;margin:7px 0 0 15px}.ui-imageviewer-header .help{margin-top:0}.ui-imageviewer-header button{float:right;font-size:16px;background-color:transparent;border:0;margin:0;width:45px;height:44px;border-left:1px solid #E0E0E0;cursor:pointer;color:red}.ui-imageviewer-header button:hover{background-color:#F8F8F8}.ui-imageviewer-buttons{position:absolute;left:0;right:0;top:45px;bottom:0}.ui-imageviewer-buttons button{background-color:#FFF;border:1px solid #FFF;border-radius:var(--radius);width:35px;height:35px;position:absolute;top:50%;margin-top:-17px;box-shadow:0 2px 5px rgba(0,0,0,0.07)}.ui-imageviewer-buttons button:hover{background-color:#4285F4;border-color:#4285F4;color:#FFF}.ui-imageviewer-buttons button:disabled{color:#A0A0A0;cursor:not-allowed;border-color:#F8F8F8;background-color:#F8F8F8;opacity:0.3}.ui-imageviewer-buttons button[name='prev']{left:15px}.ui-imageviewer-buttons button[name='next']{right:15px}.ui-imageviewer-viewer{display:table;width:100%}.ui-imageviewer-cell{display:table-cell;width:100%;height:100%;vertical-align:middle;text-align:center}.ui-dark .ui-imageviewer,.ui-dark .ui-imageviewer-loading{background-color:rgba(0,0,0,0.9)}.ui-dark .ui-imageviewer-header b{color:#FFF}.ui-dark .ui-imageviewer-header{background-color:#202020;border-bottom-color:#404040}.ui-dark .ui-imageviewer-header button{border-left-color:#404040}.ui-dark .ui-imageviewer-header button:hover{background-color:#404040;border-left-color:#404040}.ui-dark .ui-imageviewer-buttons button{background-color:#303030;border-color:#303030}.ui-dark .ui-imageviewer-buttons button:hover{background-color:#4285F4;border-color:#4285F4}.ui-dark .ui-imageviewer-buttons button:disabled{color:#505050;border-color:#202020;background-color:#202020}</style>
<script>COMPONENT('imageviewer','selector:.img-viewer;container:body;loading:1',function(self,config,cls){var cls2='.'+cls,isclosed=false,isrendering=false,events={};events.keydown=function(e){switch(e.which){case 38:case 37:self.find('button[name="prev"]').trigger('click');break;case 32:case 39:case 40:self.find('button[name="next"]').trigger('click');break;case 27:self.close();break}};events.bind=function(){if(!events.is){events.is=true;$(W).on('keydown',events.keydown)}};events.unbind=function(){if(events.is){events.is=false;$(W).off('keydown',events.keydown)}};self.readonly();self.blind();self.singleton();self.nocompile&&self.nocompile();self.make=function(){self.aclass(cls+' hidden');self.append('<div class="{0}-header"><button name="close"><i class="fa fa-times"></i></button><div><b>Name</b><div class="help">Dimension</div></div></div><div class="{0}-loading hidden"><div></div></div><div class="{0}-buttons"><button name="prev"><i class="fa fa-arrow-left"></i></button><button name="next"><i class="fa fa-arrow-right"></i></button></div><div class="{0}-viewer"><div class="{0}-cell"><img /></div></div>'.format(cls));self.resize();self.on('resize2',self.resize);$(document.body).on('click',config.selector,function(){var el=$(this);isclosed=false;self.show(el)});self.event('click','button[name]',function(){var t=this;if(!t.disabled){if(t.name==='close')self.close();else self.show($(this.$el))}});self.find('img').on('load',function(){isrendering=false;self.loading(false)})};self.close=function(){isclosed=true;isrendering=false;$('html,body').rclass(cls+'-noscroll');self.aclass('hidden');events.unbind()};self.loading=function(is){if(!config.loading)return;var el=self.find(cls2+'-loading');if(is){el.rclass('hidden',is);return}setTimeout(function(){el.aclass('hidden')},500)};self.show=function(el){if(isrendering||el==null||isclosed)return;var parent=el.closest(config.container);var arr=parent.find(config.selector).toArray();var index=arr.indexOf(el[0]);var buttons=self.find(cls2+'-buttons').find('button');buttons[0].disabled=index===0;buttons[1].disabled=index>=arr.length-1;if(!buttons[0].disabled)buttons[0].$el=arr[index-1];if(!buttons[1].disabled)buttons[1].$el=arr[index+1];self.loading(true);isrendering=true;var image=new Image();image.src=el[0].src;image.onload=function(){var img=this,ratio,w=image.width,h=image.height,tw=WW-80,th=WH-140;if(w>h){ratio=w/h;if(w>tw)w=tw;h=w/ratio>>0;if(h>th){h=th;w=h*ratio>>0}}else{ratio=h/w;if(h>th)h=th;w=h/ratio>>0;if(w>tw){w=tw;h=w*ratio>>0}}if(isclosed)return;events.bind();self.find('img').attr('src',img.src).attr('width',w).attr('height',h);self.find('.help').html(img.width+'x'+img.height+'px');self.find('b').html(el.attr('alt')||el.attr('title')||'Unknown image');self.rclass('hidden');$('html,body').aclass(cls+'-noscroll')}};self.resize=function(){var viewer=self.find(cls2+'-viewer');var loading=self.find(cls2+'-loading');var css={};css.height=WH-45;css.width=WW;viewer.css(css);loading.css(css)}});</script>