<style>.ui-rules{border:1px solid #E0E0E0;border-radius:var(--radius)}.ui-rules-item{min-height:40px;border-top:1px solid #E0E0E0;padding:7px 10px 7px}.ui-rules-item.disabled{color:#A0A0A0;background-color:#F8F8F8;font-weight:normal}.ui-rules-item.disabled input{font-weight:normal}.ui-rules-item:first-child{border-top:0}.ui-rules-key{margin-right:285px}.ui-rules-value{float:right;width:100px;height:26px}.ui-rules-comparer{float:right;width:170px;margin-right:10px}.ui-rules-comparer button{width:16.6%;border:0;background-color:#F0F0F0;border-left:1px solid #E0E0E0;font-size:10px;height:26px;cursor:pointer;font-weight:bold;letter-spacing:1px;font-family:monospace}.ui-rules-comparer button.selected{background-color:#DEDEDE !important;color:#000 !important}.ui-rules-comparer button:hover{background-color:#F8F8F8}.ui-rules-comparer button:first-child{border-left:0;border-radius:var(--radius) 0 0 var(--radius)}.ui-rules-comparer button:last-child{border-radius:0 var(--radius) var(--radius) 0}.ui-rules-comparer button:disabled{color:#A0A0A0;background-color:#E9E9E9;cursor:not-allowed;font-weight:normal;}.ui-rules .disabled .ui-rules-comparer button.selected{background-color:#E9E9E9 !important;color:#A0A0A0 !important}.ui-rules-enabled{float:left;width:45px}.ui-rules-label{padding:4px 0 0;font-size:13px;margin-left:45px}.ui-rules-label .help{margin:0}.ui-rules-checkbox{width:32px;height:18px;display:inline-block;border:1px solid #E0E0E0;line-height:15px;font-size:9px;margin:3px 0 5px;border-radius:var(--radius);position:relative;cursor:pointer;color:#FFF;vertical-align:top;border-radius:100px;background:#E0E0E0;transition:all 0.3s;text-align:left}.ui-rules-checkbox i{width:16px;height:16px;position:relative;display:inline-block;border-radius:100px;background:#FFF;transition:margin 0.3s}.ui-rules-checkbox.checked{background-color:var(--color);border-color:var(--color)}.ui-rules-checkbox.checked i{margin-left:14px}.ui-rules-list{width:100%;cursor:pointer;height:26px}.ui-rules .disabled .ui-rules-list{cursor:default}.ui-rules-number,.ui-rules-string{background-color:#FFF;border-radius:var(--radius);padding:2px 5px;border:1px solid #E0E0E0;height:26px;overflow:hidden;font-weight:bold;text-align:center}.ui-rules-number input,.ui-rules-string input{border:0;width:100%;background:transparent;outline:0;margin:0;padding:0;height:18px;font-size:15px;font-weight:bold}.ui-rules-number input{text-align:center}.ui-rules .disabled .ui-rules-number,.disabled .ui-rules-string{color:#A0A0A0;background-color:#F0F0F0}.disabled .ui-rules-number,.disabled .ui-rules-string,.disabled .ui-rules-boolean{display:none}.ui-rules .disabled button{display:none}.ui-dark .ui-rules{border-color:#404040}.ui-dark .ui-rules-item{border-top-color:#404040}.ui-dark .ui-rules-item.disabled{color:#A0A0A0;background-color:#252525}.ui-dark .ui-rules-comparer button{background-color:#303030;border-left-color:#383838}.ui-dark .ui-rules-comparer button.selected{background-color:#555 !important;color:#E0E0E0 !important}.ui-dark .ui-rules-comparer button:hover{background-color:#444}.ui-dark .ui-rules-comparer button:disabled{color:#505050;background-color:#333}.ui-dark .ui-rules .disabled .ui-rules-comparer button.selected{background-color:#333 !important;color:#505050 !important}.ui-dark .ui-rules-checkbox{border-color:#505050;color:#FFF;background:#505050}.ui-dark .ui-rules-checkbox i{background:#FFF}.ui-dark .ui-rules-checkbox.checked{background-color:var(--color);border-color:var(--color)}.ui-dark .ui-rules-number,.ui-dark .ui-rules-string{background-color:#333;border-color:#404040}.ui-dark .ui-rules-number input,.ui-dark .ui-rules-string input{background:transparent}.ui-dark .disabled .ui-rules-number,.ui-dark .disabled .ui-rules-string{color:#505050;background-color:#333}</style>
<script>COMPONENT('rules@1','dirsearch:Search',function(self,config,cls){var skip=false,cls2='.'+cls,items;self.readonly();self.renders={};self.renders.number=function(item){return'<div class="{0}-number"><input type="text"{1} value="{2}" /></div>'.format(cls,item.enabled?'':' disabled',Thelpers.encode(item.value))};self.renders.string=function(item){if(item.items){var m=item.items.findItem('id',item.value);return'<div class="{0}-string"><div class="{0}-list">{2}</div></div>'.format(cls,item.enabled?'':' disabled',m?m.name:'')}else return'<div class="{0}-string"><input type="text"{1} value="{2}" /></div>'.format(cls,item.enabled?'':' disabled',Thelpers.encode(item.value))};self.renders.boolean=function(item){return'<div class="{0}-boolean"><span class="{0}-checkbox{1}"><i></i></span></div>'.format(cls,item.value?' checked':'')};self.renders.item=function(item){var type=item.type.toLowerCase();var html=self.renders[type](item);var comparer=['<','<=','==','!=','>=','>'];for(var i=0;i<comparer.length;i++){var m=comparer[i],disabled=type!=='number'&&i!==2&&i!==3,selected=item.comparer===m;comparer[i]='<button data-disabled="{3}" class="{4}" name="{0}"{1}>{2}</button>'.format(m,disabled||!item.enabled?' disabled':'',m==='!='?'<>':m==='=='?'=':m.replace('>=','=>'),disabled,selected?'selected':'')}return('<div class="{0}-item'+(item.enabled?'':' disabled')+'" data-name="'+item.name+'"><div class="{0}-value">'+html+'</div><div class="{0}-comparer">'+comparer.join('')+'</div><div class="{0}-key"><div class="{0}-enabled"><span class="{0}-checkbox'+(item.enabled?' checked':'')+'"><i></i></span></div><div class="{0}-label">'+item.label+(item.note?('<div class="help">'+item.note+'</div>'):'')+'</div></div></div>').format(cls)};self.forcechange=function(){skip=true;self.change(true);self.update()};self.make=function(){self.aclass(cls);self.event('click',cls2+'-enabled',function(){var el=$(this);var is=el.find('span').tclass('checked').hclass('checked');el=el.closest(cls2+'-item');el.tclass('disabled',!is);el.find('button').prop('disabled',function(){return this.getAttribute('data-disabled')==='true'?true:!is});el.find('input').prop('disabled',!is);items.findItem('name',el.attrd('name')).enabled=is;self.forcechange()});self.event('click',cls2+'-boolean',function(){var el=$(this);var is=el.find('span').tclass('checked').hclass('checked');var id=el.closest(cls2+'-item').attrd('name');items.findItem('name',id).value=is;self.forcechange()});self.event('click','button',function(){var el=$(this);el.parent().find('.selected').rclass('selected');el.aclass('selected');var id=el.closest(cls2+'-item').attrd('name');items.findItem('name',id).comparer=el.prop('name');self.forcechange()});self.event('change','input',function(){var el=$(this);var id=el.closest(cls2+'-item').attrd('name');var item=items.findItem('name',id);if(item.type==='number')item.value=el.val().parseFloat();else item.value=el.val();self.forcechange()});self.event('click',cls2+'-list',function(){var el=$(this);var opt={},item=items.findItem('name',el.closest(cls2+'-item').attrd('name'));opt.element=el;opt.align='right';opt.items=item.items;opt.placeholder=config.dirsearch;opt.callback=function(sel){el.text(sel.name);self.forcechange()};SETTER('directory/show',opt)})};self.setter=function(value){if(skip){skip=false;return}if(!value)value=[];items=value;var builder=[];for(var i=0;i<value.length;i++)builder.push(self.renders.item(value[i]));self.html(builder.join(''))}});</script>