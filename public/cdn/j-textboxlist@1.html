<style>.ui-textboxlist-label{margin-bottom:3px;font-size:12px;text-align:left}.ui-textboxlist-label-required:before{color:red;content:'***';margin-right:5px}.ui-textboxlist-label i{margin-right:5px}.ui-textboxlist-items>div:first-child{border-radius:var(--radius) var(--radius) 0 0}.ui-textboxlist-item{height:36px;background-color:#FFF;border:1px solid #E0E0E0;border-bottom:0}.ui-textboxlist-item>div:first-child{float:right;width:36px;text-align:center;color:#555;font-size:14px;height:35px;border-left:1px solid #E0E0E0}.ui-textboxlist-remove{color:#DA4453}.ui-textboxlist-item>div:last-child{padding:4px 0 0;margin-right:36px}.ui-textboxlist-item i{cursor:pointer;display:block;line-height:35px;text-align:center;float:left;width:36px;border-left:1px solid #E0E0E0}.ui-textboxlist-item i:first-child{border-left:0}.ui-textboxlist-item i:active{margin-top:1px}.ui-textboxlist-item input{width:100%;background-color:transparent;border:0;padding:1px 10px 0;border-radius:var(--radius);outline:0;font-size:13px;color:#000;line-height:26px}.ui-textboxlist-base{border-radius:0 0 var(--radius) var(--radius);border-bottom:1px solid #E0E0E0}.ui-textboxlist-base>div:first-child{display:none}.ui-textboxlist-helper{margin-top:8px;font-size:11px;color:red !important;text-align:left}.ui-textboxlist-empty .ui-textboxlist-base{border-radius:var(--radius)}.ui-textboxlist-item-invalid input{color:red}.ui-textboxlist-movable .ui-textboxlist-item>div:last-child{margin-right:110px}.ui-textboxlist-movable .ui-textboxlist-item>div:first-child{width:110px}.ui-dark .ui-textboxlist-item{border-color:#404040}.ui-dark .ui-textboxlist-item{background-color:#202020;border-color:#404040}.ui-dark .ui-textboxlist-item>div:first-child{color:#999;border-left-color:#404040}.ui-dark .ui-textboxlist-item input{background-color:transparent;color:#FFF}.ui-dark .ui-textboxlist-base{border-bottom-color:#404040}.ui-dark .ui-textboxlist-helper{color:red !important}.ui-dark .ui-textboxlist-item i{border-left-color:#404040}</style>
<script>COMPONENT('textboxlist@1','maxlength:100;required:false;error:You reach the maximum limit;movable:false',function(self,config,cls){var container,content,empty={},skip=false,cempty=cls+'-empty',crequired='required',helper=null,cls2='.'+cls;self.setter=null;self.getter=null;self.nocompile&&self.nocompile();self.template=Tangular.compile(('<div class="{0}-item"><div>'+(config.movable?'<i class="fa fa-angle-up {0}-up"></i><i class="fa fa-angle-down {0}-down"></i>':'')+'<i class="far fa-trash-o {0}-remove"></i></div><div><input type="text" maxlength="{{ max}}" placeholder="{{ placeholder}}"{{ if disabled}} disabled="disabled"{{ fi}} value="{{ value}}" /></div></div>').format(cls));self.configure=function(key,value,init,prev){if(init)return;var redraw=false;switch(key){case'disabled':self.tclass(crequired,value);self.find('input').prop('disabled',true);empty.disabled=value;self.reset();break;case'maxlength':empty.max=value;self.find('input').prop(key,value);break;case'placeholder':empty.placeholder=value;self.find('input').prop(key,value);break;case'label':redraw=true;break;case'icon':if(value&&prev)self.find('i').rclass().aclass(value);else redraw=true;break}if(redraw){skip=false;self.redraw();self.refresh()}};self.redraw=function(){var icon='',html=config.label||content;if(config.icon)icon='<i class="{0}"></i>'.format(config.icon.indexOf(' ')===-1?('fa fa-'+config.icon):config.icon);empty.value='';self.tclass(cls+'-movable',!!config.movable);self.html((html?('<div class="'+cls+'-label{2}">{1}{0}:</div>').format(html,icon,config.required?(' '+cls+'-required'):''):'')+('<div class="'+cls+'-items"></div>'+self.template(empty).replace('-item"','-item '+cls+'-base"')));container=self.find(cls2+'-items')};self.make=function(){empty.max=config.max;empty.placeholder=config.placeholder;empty.value='';empty.disabled=config.disabled;if(config.disabled)self.aclass('ui-disabled');content=self.html();self.aclass(cls);self.redraw();self.move=function(offset,el){var arr=self.get();var index=el.index();var tmp;if(offset===1){if(arr[index]==null||arr[index+1]==null)return}else{if(arr[index]==null||arr[index-1]==null)return}tmp=arr[index];arr[index]=arr[index+offset];arr[index+offset]=tmp;var items=self.find(cls2+'-item');items.eq(index).find('input').val(arr[index]);items.eq(index+offset).find('input').val(arr[index+offset])};self.event('click',cls2+'-up',function(){self.move(-1,$(this).closest(cls2+'-item'))});self.event('click',cls2+'-down',function(){self.move(1,$(this).closest(cls2+'-item'))});self.event('click',cls2+'-remove',function(){if(config.disabled)return;var el=$(this);var parent=el.closest(cls2+'-item');var value=parent.find('input').val();var arr=self.get();helper!=null&&helper.remove();helper=null;parent.remove();var index=arr.indexOf(value);if(index===-1)return;arr.splice(index,1);self.tclass(cempty,!arr.length);self.tclass(crequired,config.required&&!arr.length);skip=true;SET(self.path,arr,2);self.change(true)});self.event('change keypress blur','input',function(e){if((e.type==='keypress'&&e.which!==13)||config.disabled)return;var el=$(this);var value=this.value.trim();if(!value)return;var arr=[],base=el.closest(cls2+'-base');var len=base.length>0;if(len&&e.type==='change')return;var raw=self.get();if(config.limit&&len&&raw.length>=config.limit){if(!helper){base.after(('<div class="'+cls+'-helper"><i class="fa fa-warning" aria-hidden="true"></i> {0}</div>').format(config.error));helper=container.closest(cls2).find(cls2+'-helper')}return}if(len){if(!raw||raw.indexOf(value)===-1)self.push(value);this.value='';self.change(true);return}skip=true;container.find('input').each(function(){var temp=this.value.trim();switch(config.type){case'lower':temp=temp.toLowerCase();break;case'upper':temp=temp.toUpperCase();break;case'number':temp=temp.parseInt();break;case'date':temp=temp.parseDate();break;case'a-z':temp=temp.toLowerCase().replace(/[^a-z]/g,'');break}if(arr.indexOf(temp)===-1)arr.push(temp);else skip=false});self.set(arr,2);self.change(true)})};self.setter=function(value){if(skip){skip=false;return}if(!value||!value.length){self.aclass(cempty);config.required&&self.aclass(crequired);container.empty();return}self.rclass(cempty);self.rclass(crequired);var builder=[];for(var i=0;i<value.length;i++){empty.value=value[i];builder.push(self.template(empty))}container.empty().append(builder.join(''))};self.validate=function(value,init){if(init)return true;var valid=!config.required,items=container.children();if(!value||!value.length)return valid;for(var i=0;i<value.length;i++){var item=value[i];!item&&(item='');switch(config.type){case'email':valid=item.isEmail();break;case'url':valid=item.isURL();break;case'currency':case'number':valid=item>0;break;case'date':valid=item instanceof Date&&!isNaN(item.getTime());break;default:valid=item.length>0;break}items.eq(i).tclass(cls+'-item-invalid',!valid)}return valid}});</script>