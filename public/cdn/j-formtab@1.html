<style>.ui-formtab-modal{position:fixed;min-width:200px;background-color:#FFF;margin-left:8px;text-align:left;border:1px solid #D0D0D0;border-bottom:0;z-index:100;bottom:0;right:0;overflow:hidden;border-radius:var(--radius) var(--radius) 0 0}.ui-formtab-body{display:none}.ui-formtab-open{box-shadow:0 0 20px rgba(0,0,0,0.05)}.ui-formtab-open .ui-formtab-body{display:block}.ui-formtab-open .ui-formtab-title .fa-expand-arrows-alt{display:block}.ui-formtab-open .ui-formtab-title{width:100%}.ui-formtab-maximized{z-index:102;border-bottom:1px solid #E0E0E0;margin:0;right:auto;bottom:auto}.ui-formtab-title .fa-expand-arrows-alt{display:none}.ui-formtab-open .ui-formtab-title .fa-times{color:red !important}.ui-formtab-title{height:30px;line-height:30px;background-color:#F0F0F0;padding:0 5px;width:200px;border-radius:var(--radius) var(--radius) 0 0;color:gray}.ui-formtab-title:hover{background-color:#F4F4F4}.ui-formtab-title i{float:right;width:24px;height:24px;line-height:24px;text-align:center;cursor:pointer;margin:3px 0 0;border-radius:var(--radius);font-size:12px;color:gray}.ui-formtab-title i:hover{background-color:rgba(0,0,0,0.1);color:#000}.ui-formtab-title label{margin-right:65px;display:block;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;padding-left:3px;cursor:pointer;font-size:11px}.ui-formtab-open .ui-formtab-title label{font-size:13px}.ui-formtab-layer{position:fixed;left:0;right:0;bottom:0;top:0;background-color:rgba(255,255,255,0.6);z-index:101;display:none}.ui-formtab-ismaximized .ui-formtab-layer{display:block}.ui-dark .ui-formtab-modal{background-color:#252525;border-color:#404040}.ui-dark .ui-formtab-title{background-color:#404040}.ui-dark .ui-formtab-title:hover{background-color:#444}.ui-dark .ui-formtab-title i:hover{color:#FFF}.ui-dark .ui-formtab-layer{background-color:rgba(0,0,0,0.6)}</style>
<script>COMPONENT('formtab@1','width:500;height:400;margin:10;marginfullscreen:20',function(self,config,cls){var cls2='.'+cls,clsm='maximized',skip=false,ismobile=isMOBILE&&WIDTH()==='xs';self.readonly();self.count=function(){return(WW/(self.find(cls2+'-open').length*config.width))>>0};self.make=function(){var scr=self.find('script');self.template=Tangular.compile(scr.html());scr.remove();$(document.body).append('<div class="{0}" id="{1}"><div class="{0}-layer"></div></div>'.format(cls,self.ID));self.replace($('#'+self.ID),true);self.event('click',cls2+'-title',function(){var el=$(this);var parent=el.parent();if(ismobile||parent.hclass(cls+'-'+clsm))return;var id=parent.attrd('id');self.toggle(id)});self.event('click',cls2+'-op',function(e){var el=$(this);var name=el.attrd('name');var id=el.closest(cls2+'-modal').attrd('id');self[name](id);e.stopPropagation();e.preventDefault()});self.event('click','button,.cancel',function(){var t=this;if(t.tagName==='BUTTON'&&(!t.name||(t.name!=='submit'&&t.name!=='cancel')))return;var el=$(t);var scope=el.scope();var parent=el.closest(cls2+'-modal');var id=parent.attrd('id');if(t.name==='submit'){if(config.submit)self.EXEC(config.submit,self.get().findItem('id',id),scope?scope.get():null,function(){self.closeforce(id)})}else self.close(id)});if(config.enter){self.event('keydown',function(e){if(e.keyCode===13){setTimeout2(self.ID+'enter',function(){self.find('button[name="submit"]').trigger('click')},500)}})}self.resize();self.on('resize + resize2',self.resize)};self.resize2=function(){setTimeout2(self.ID,self.resize,200)};self.insert=function(obj){var m=self.find(cls2+'-modal[data-id="{0}"]'.format(obj.id));if(!m.length){var maximized='';if(ismobile){maximized=' '+cls+'-'+clsm;self.aclass(cls+'-ismaximized')}var scope=self.ID+'p'+GUID(5);var template='<div data-id="{4}" class="invisible {0}-modal{8}"><div class="{0}-title"><i class="fa fa-times {0}-op" data-name="close"></i><i class="fa fa-expand-arrows-alt {0}-op{9}" data-name="maximize"></i><i class="fa fa-minus {0}-op{9}" data-name="minimize"></i><label>{3}</label></div><div class="{0}-body" data-scope="{2}" data-id="{4}" style="width:{5}px;min-height:{6}px">{7}</div></div>'.format(cls,self.ID,scope,obj.name,obj.id,config.width,config.height,self.template(obj),(obj.minimized?'':(' '+cls+'-open'))+maximized,(ismobile?' hidden-xs':''));if(obj.data)SETR(scope,CLONE(obj.data));self.append(template);self.resize2();setTimeout2(self.ID+'compile',COMPILE,300);setTimeout(function(obj){var el=self.findmodal(obj.id);el.rclass('invisible');config.onopen&&self.EXEC(config.onopen,obj,el);config.autofocus&&self.autofocus(config.autofocus)},500,obj)}};self.findmodal=function(id){return self.find(cls2+'-modal[data-id="{0}"]'.format(id))};self.toggle=function(id){var el=self.findmodal(id);el.tclass(cls+'-open');self.resize();self.emitresize(el)};self.emitresize=function(el){el.SETTER('*','resize')};self.minimize=function(id){var el=self.findmodal(id);if(el.hclass(cls+'-open')){el.rclass(cls+'-open');if(el.hclass(cls+'-'+clsm))self.maximize(id);else self.emitresize(el);self.resize()}else self.toggle(id)};self.maximize=function(id){var el=self.findmodal(id);if(el.hclass(cls+'-'+clsm)){el.rclass(cls+'-'+clsm);self.rclass(cls+'-is'+clsm)}else{el.find(cls2+'-'+clsm).rclass(clsm);el.aclass(cls+'-open '+cls+'-'+clsm);self.aclass(cls+'-is'+clsm)}self.resize();self.emitresize(el)};self.close=function(id){if(config.onclose){self.EXEC(config.onclose,self.get().findItem('id',id),function(){self.closeforce(id)})}else self.closeforce(id)};self.closeforce=function(id){var el=self.findmodal(id);if(el.length){skip=true;if(el.hclass(cls+'-'+clsm))self.rclass(cls+'-is'+clsm);var items=self.get();items.splice(items.findIndex('id',id),1);self.update();el.remove();FREE();self.resize()}};self.resize=function(){var wd=WIDTH();var mf=(config['marginfullscreen'+wd]||config.marginfullscreen);var mn=(config['margin'+wd]||config.margin);var m=mf*2,arr=self.find(cls2+'-modal');var cssa={},cssb={},offset=mn,w=$(W).width();for(var i=0;i<arr.length;i++){var el=$(arr[i]);var body=el.find(cls2+'-body');if(el.hclass(cls+'-'+clsm)){cssa.width=w-m;cssa.height=WH-m;cssa['min-height']='';cssa.left=cssa.top=mf;cssa.right='';cssb.width=cssa.width;cssb.height=cssa.height-body.position().top;cssb['min-height']=''}else{cssa.height='';cssa.right=offset+'px';cssa.width=cssa.height=cssa.left=cssa.top='';cssb.width=config['width'+wd]||config.width;if(el.hclass(cls+'-open'))cssa.width=cssb.width;cssb['min-height']=config['height'+wd]||config.height;cssb.height=''}el.css(cssa);body.css(cssb);if(el.hclass(cls+'-open'))offset+=config.width+mn;else offset+=el.find(cls2+'-title').width()+(mn*2)}self.css('width',w)};self.setter=function(value){if(skip){skip=false;return}var arr=self.find(cls2+'-modal');for(var i=0;i<arr.length;i++){var el=arr[i],id=el.getAttribute('data-id');if(!value.findItem('id',id))self.closeforce(id)}for(var i=0;i<value.length;i++)self.insert(value[i]);self.resize2()}});</script>